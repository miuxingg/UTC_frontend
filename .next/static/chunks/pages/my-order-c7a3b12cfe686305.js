(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{29978:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-order",function(){return t(10610)}])},98307:function(e,n,t){"use strict";var r,i,c;t.d(n,{Ri:function(){return i},t8:function(){return r},vz:function(){return c}}),function(e){e.VisaCard="VisaCard",e.COD="COD"}(r||(r={})),function(e){e.Pending="pending",e.Success="success",e.Rejected="rejected"}(i||(i={})),function(e){e.Pending="pending",e.Success="success",e.Rejected="rejected",e.Shipping="shipping"}(c||(c={}))},10610:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ne}});var r=t(85893),i=t(67294),c=t(25617),o=t(84345),l=t(90948),a=t(87357),s=t(14621),u=t(57249),d=t(53156),h=t(19370),g=t(44472),p=t(83578),f=t(72882),j=t(55113),x=t(7906),m=t(53184),b=t(68509),v=t(53252),y=t(94229),Z=t(76483),k=t(44386),w=t(295),S=t(79069),C=t(27484),O=t.n(C),P=t(93946),I=t(57922),z=t(75503),E=t(90813),A=t(77058),_=t(8364),D=t(98307),M=t(50657),N=t(15861),R=t(86886),B=t(31812),q=function(e){var n=e.open,t=e.id,i=e.onAccept,c=e.onClose,o=(0,A.$)().t;return(0,r.jsx)(M.Z,{onClose:c,open:n,children:(0,r.jsxs)(a.Z,{width:500,height:300,p:"32px 24px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,r.jsx)("img",{src:"/images/new-mails.jpg",style:{width:"120px",height:"120px"}}),(0,r.jsxs)(N.Z,{align:"center",children:[o("checkout-history.popup.remove.confirm"),"\xa0",(0,r.jsx)("span",{style:{fontWeight:600,fontSize:"18px"},children:t})]}),(0,r.jsx)(a.Z,{my:3,children:(0,r.jsxs)(R.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(R.ZP,{item:!0,children:(0,r.jsx)(B.Z,{size:"large",type:"submit",variant:"contained",onClick:c,sx:{color:"white",backgroundColor:"#D92F33"},children:o("checkout-history.popup.button.cancel")})}),(0,r.jsx)(R.ZP,{item:!0,children:(0,r.jsx)(B.Z,{size:"large",type:"submit",variant:"contained",onClick:i,children:o("checkout-history.popup.button.accept")})})]})})]})})},T=t(74803);function Y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function $(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,c=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(c.push(r.value),!n||c.length!==n);o=!0);}catch(a){l=!0,i=a}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return c}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=(0,l.ZP)(P.Z)({":focus":{outline:"none"}}),G=function(e){var n=e.id,t=e.createdAt,o=e.address,l=e.total,s=e.books,u=e.stt,d=e.status,h=F(i.useState(!1),2),g=h[0],p=h[1],f=(0,c.I0)(),j=(0,A.$)().t,y=F(i.useState(!1),2),Z=y[0],k=y[1],C=F(i.useState(""),2),P=C[0],M=C[1];return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(b.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)(L,{"aria-label":"expand row",size:"small",onClick:function(){return p(!g)},children:g?(0,r.jsx)(E.Z,{}):(0,r.jsx)(z.Z,{})})}),(0,r.jsx)(v.Z,{component:"th",scope:"row",children:u}),(0,r.jsx)(v.Z,{align:"center",children:n}),(0,r.jsx)(v.Z,{align:"center",children:O()(t).format("DD/MM/YYYY")}),(0,r.jsx)(v.Z,{align:"center",children:o}),(0,r.jsx)(v.Z,{align:"center",children:(0,S.E)(l)}),d===D.vz.Pending?(0,r.jsx)(v.Z,{align:"center",children:(0,r.jsx)(L,{onClick:function(){k(!0),M(n)},children:(0,r.jsx)(_.Z,{style:{color:"red"}})})}):null]}),(0,r.jsx)(b.Z,{children:(0,r.jsx)(v.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,r.jsx)(I.Z,{in:g,timeout:"auto",unmountOnExit:!0,children:(0,r.jsx)(a.Z,{sx:{margin:1},my:5,children:(0,r.jsxs)(x.Z,{size:"small","aria-label":"purchases",children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(v.Z,{align:"center",children:j("checkout-history.table.image")}),(0,r.jsx)(v.Z,{align:"center",children:j("checkout-history.table.name")}),(0,r.jsx)(v.Z,{align:"center",children:j("checkout-history.table.author")}),(0,r.jsx)(v.Z,{align:"center",children:j("checkout-history.table.quantity")}),(0,r.jsx)(v.Z,{align:"center",children:j("checkout-history.table.amount")})]})}),(0,r.jsx)(w.Z,{children:s.map((function(e,n){return(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(v.Z,{align:"center",children:(0,r.jsx)("img",{src:e.thumbnail,style:{width:50,height:70}})}),(0,r.jsx)(v.Z,{align:"center",children:e.name}),(0,r.jsx)(v.Z,{align:"center",children:e.author}),(0,r.jsx)(v.Z,{align:"center",children:e.quantity}),(0,r.jsx)(v.Z,{align:"center",children:(0,S.E)(e.price)})]},n)}))})]})})})})}),Z?(0,r.jsx)(q,{open:!0,id:P,onAccept:function(){f((0,T.dA)({id:P,status:D.vz.Rejected})),k(!1)},onClose:function(){k(!1)}}):null]})},V=function(e){var n=e.lines,t=e.status;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(w.Z,{children:n.map((function(e,n){return(0,i.createElement)(G,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){$(e,n,t[n])}))}return e}({},e,{key:n,status:t}))}))})})},W=function(e){var n;return null!==(n=e.order.ordersByStatus)&&void 0!==n?n:{total:0,items:[]}};function X(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}(0,l.ZP)(a.Z)((function(e){var n=e.img;return{backgroundImage:"url('".concat(n,"')")}}));var H=(0,l.ZP)(s.Z)((function(e){var n,t=e.theme;return X(n={},"&.".concat(u.Z.alternativeLabel),{top:22}),X(n,"&.".concat(u.Z.active),X({},"& .".concat(u.Z.line),{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"})),X(n,"&.".concat(u.Z.completed),X({},"& .".concat(u.Z.line),{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"})),X(n,"& .".concat(u.Z.line),{height:3,border:0,backgroundColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderRadius:1}),n})),U=(0,l.ZP)("div")((function(e){var n=e.theme,t=e.ownerState;return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){X(e,n,t[n])}))}return e}({backgroundColor:"dark"===n.palette.mode?n.palette.grey[700]:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},t.active&&{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},t.completed&&{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"})}));function J(e){var n=e.active,t=e.completed,i=e.className,c={1:(0,r.jsx)(y.Z,{}),2:(0,r.jsx)(Z.Z,{}),3:(0,r.jsx)(k.Z,{}),4:(0,r.jsx)(k.Z,{})};return(0,r.jsx)(U,{ownerState:{completed:t,active:n},className:i,children:c[String(e.icon)]})}var K=[{key:0,value:"checkout-history.table.pending"},{key:1,value:"checkout-history.table.shipping"},{key:2,value:"checkout-history.table.success"},{key:3,value:"checkout-history.table.delete"}],Q=function(e){switch(e){case 0:default:return D.vz.Pending;case 1:return D.vz.Shipping;case 2:return D.vz.Success;case 3:return D.vz.Rejected}},ee=(0,i.memo)((function(){var e,n=(0,c.I0)(),t=(0,A.$)().t,o=(0,i.useState)(0),l=o[0],s=o[1],u=(0,c.v9)(W);return(0,i.useEffect)((function(){n((0,T.GB)({status:Q(l)}))}),[l]),(0,r.jsx)(a.Z,{mb:10,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(a.Z,{mt:10,mb:4,children:(0,r.jsx)(h.Z,{alternativeLabel:!0,activeStep:l,connector:(0,r.jsx)(H,{}),children:K.map((function(e){var n=e.key,i=e.value;return(0,r.jsx)(g.Z,{onClick:function(){return s(n)},children:(0,r.jsx)(p.Z,{StepIconComponent:J,children:t(i)})},n)}))})}),(0,r.jsx)(a.Z,{width:"100%",my:4,style:{backgroundColor:"#eee"},children:(null===u||void 0===u?void 0:u.total)?(0,r.jsx)(f.Z,{component:j.Z,children:(0,r.jsxs)(x.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(v.Z,{}),(0,r.jsx)(v.Z,{children:t("checkout-history.table.stt")}),(0,r.jsx)(v.Z,{align:"center",children:t("checkout-history.table.id")}),(0,r.jsx)(v.Z,{align:"center",children:t("checkout-history.table.date")}),(0,r.jsx)(v.Z,{align:"center",children:t("checkout-history.table.address")}),(0,r.jsx)(v.Z,{align:"center",children:t("checkout-history.table.total-amount")}),Q(l)!==D.vz.Pending?null:(0,r.jsx)(v.Z,{align:"center",children:t("checkout-history.table.action")})]})}),(0,r.jsx)(V,{lines:(e=(null===u||void 0===u?void 0:u.items)||[],e.map((function(e,n){var t,r,i,c,o,l,a,s;return{stt:n+1,id:null!==(c=null===e||void 0===e?void 0:e.id)&&void 0!==c?c:"",createdAt:null!==(o=null===e||void 0===e?void 0:e.createdAt)&&void 0!==o?o:new Date,address:"".concat(null===e||void 0===e?void 0:e.shippingMethod.privateHome,"-").concat(null!==(l=null===(t=null===e||void 0===e?void 0:e.shippingMethod.wards)||void 0===t?void 0:t.name)&&void 0!==l?l:"","-").concat(null!==(a=null===(r=null===e||void 0===e?void 0:e.shippingMethod.district)||void 0===r?void 0:r.name)&&void 0!==a?a:"","-").concat(null!==(s=null===(i=null===e||void 0===e?void 0:e.shippingMethod.province)||void 0===i?void 0:i.name)&&void 0!==s?s:""),total:e.totalMoney,status:e.status,books:e.orderLines.map((function(e,n){return{id:e.id,thumbnail:e.book[0].thumbnail,name:e.book[0].name,price:e.price,author:e.book[0].author,quantity:e.quantity}}))}}))),status:Q(l)})]})}):(0,r.jsx)(a.Z,{display:"flex",justifyContent:"center",py:2,children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)("img",{src:"/images/empty.png",alt:""}),(0,r.jsx)("span",{children:t("checkout-history.table.empty")})]})})})]})})})),ne=function(){var e=(0,c.I0)();return(0,i.useEffect)((function(){e((0,T.GB)({status:D.vz.Pending}))}),[e]),(0,r.jsx)(o.Z,{children:(0,r.jsx)(ee,{})})}}},function(e){e.O(0,[431,738,657,15,694,205,103,774,888,179],(function(){return n=29978,e(e.s=n);var n}));var n=e.O();_N_E=n}]);